import{r as f,u as b,a as w,m as L,b as B,j as e,c as $,d as E,B as P,e as S,f as N,C as j,g,h as T}from"./index-5292975a.js";const y=f.forwardRef(({bsPrefix:o,active:p,disabled:r,eventKey:d,className:m,variant:l,action:u,as:h,...n},i)=>{o=b(o,"list-group-item");const[c,k]=w({key:L(d,n.href),active:p,...n}),s=B(a=>{if(r){a.preventDefault(),a.stopPropagation();return}c.onClick(a)});r&&n.tabIndex===void 0&&(n.tabIndex=-1,n["aria-disabled"]=!0);const t=h||(u?n.href?"a":"button":"div");return e.jsx(t,{ref:i,...n,...c,onClick:s,className:$(m,o,k.isActive&&"active",r&&"disabled",l&&`${o}-${l}`,u&&`${o}-action`)})});y.displayName="ListGroupItem";const _=y,C=f.forwardRef((o,p)=>{const{className:r,bsPrefix:d,variant:m,horizontal:l,numbered:u,as:h="div",...n}=E(o,{activeKey:"onSelect"}),i=b(d,"list-group");let c;return l&&(c=l===!0?"horizontal":`horizontal-${l}`),e.jsx(P,{ref:p,...n,as:h,className:$(r,i,m&&`${i}-${m}`,c&&`${i}-${c}`,u&&`${i}-numbered`)})});C.displayName="ListGroup";const O=Object.assign(C,{Item:_});function G(o){const p=S(),r=N(s=>s.auth.jwt),d=N(s=>s.user),{posts:m,handleOpenCommentModal:l,handleOpenPostModal:u,handleOpenShareModal:h,socket:n}=o,i=n,c=async s=>{try{const t=await fetch("http://cornhub.ap-south-1.elasticbeanstalk.com/api/v1/feed/delete-post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({postID:s})});if(t.ok){const a=await t.json();p(T(r))}else{const a=await t.json();console.error(a.message)}}catch(t){console.error("Error deleting post:",t)}},k=async s=>{try{const t=await fetch("http://cornhub.ap-south-1.elasticbeanstalk.com/api/v1/feed/like-post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({postID:s})});if(t.ok){const a=await t.json(),x=document.getElementById(`pop-button-${s}`);x&&(a.message==="Like"&&(x.innerHTML=`<img src='/unliked.svg' alt='unliked' /><span
					  id="like-count-${s}"
					>
					  ${a.likeCount}
					</span>`),a.message==="Unlike"&&(x.innerHTML=`<img src='/liked.svg' alt='liked' /><span
					  id="like-count-${s}"
					>
					  ${a.likeCount}
					</span>`));const v=document.getElementById(`like-count-${s}`);v&&(v.className="position-absolute top-25 start-100  translate-middle badge rounded-pill bg-danger"),a.message==="Unlike"&&i&&(i.emit("ping","ping"),i.emit("newLike",{postID:s,userID:d.id}))}else{const a=await t.json();console.error(a.message)}}catch(t){console.error("Error liking post:",t)}};return f.useEffect(()=>{},[m]),e.jsx(O,{className:"scrollable-feed","data-bs-theme":"dark",children:m.map(s=>e.jsx(j,{className:"m-2 w-100 ",children:e.jsxs(j.Body,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx(j.Title,{children:s.title}),e.jsx(j.Text,{children:s.description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"m-1"}),e.jsx("div",{className:"m-1",children:e.jsxs(g,{id:`pop-button-${s._id}`,variant:"none",className:"w-100",onClick:()=>k(s._id),children:[s.poppers.includes(d.id)?e.jsx("img",{src:"/liked.svg",alt:"liked"}):e.jsx("img",{src:"/unliked.svg",alt:"unliked"}),e.jsx("span",{id:`like-count-${s._id}`,className:"position-absolute top-25 start-100  translate-middle badge rounded-pill bg-danger",children:s.poppers.length})]})}),e.jsx("div",{className:"m-1",children:e.jsx(g,{variant:"none",onClick:()=>l(s._id),children:e.jsx("img",{src:"/comment.svg",alt:"comment"})})}),s.user===d.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"m-1",children:e.jsx(g,{className:"w-100",variant:"none",onClick:()=>c(s._id),children:e.jsx("img",{src:"/delete.svg",alt:"delete"})})}),e.jsx("div",{className:"m-1",children:e.jsx(g,{className:"w-100",variant:"none",onClick:()=>u(s._id),children:e.jsx("img",{src:"/update.svg",alt:"update"})})}),e.jsx("div",{className:"m-1",children:e.jsx(g,{className:"w-100",variant:"none",onClick:()=>h(s._id),children:e.jsx("img",{src:"/share.svg",alt:"share"})})})]}):e.jsx("div",{className:"m-1",children:e.jsx(g,{className:"w-100",variant:"none",onClick:()=>h(s._id),children:e.jsx("img",{src:"/share.svg",alt:"share"})})})]})]})},s._id))})}export{G as default};
